<template name="documentPopup">
  <style>
    body {
      margin: 0;
      padding: 0;
      width: 722px;
      height: 860px;
      overflow: hidden;
    }

    #contentWrapper {
      position: relative
      display: block;
      margin: 10px auto;
      width: 700px;
      overflow: scroll;
      -webkit-overflow-scrolling: touch;
      height: 688px;
      background-color: #f5f5f5;
      padding: 10px;
    }

    #textContent, .textSelectionWrapper  {
      position: relative;
      white-space:pre-wrap;
      /*word-wrap: normal;
      word-break: normal;*/
      border: 0;
      padding: 0;
      margin: 0;
    }

    .textSelectionWrapper {
      background: transparent;
      pointer-events: none;
      position: absolute;
      top: 0px; 
      left: 0px; 
      margin: 20px; /* same as #contentWrapper padding + #contentWrapper margin */
      width: 680px;
    }

    .textSelection {
      max-width: 100%;
    }

    .container {
      margin: 0 !important;
      width: 100% !important;
      padding: 0 !important;
      overflow: hidden;
    }

    #editArea {
      position: fixed;
      height: 172px;
    }

    #contentArea {
      width: 722px;
      height: 688px;
    }
  </style>

  <div id="contentArea">
    
      <div id="contentWrapper">
        <pre id="textContent">{{{content}}}</pre>

        {{#each textHighlights}}
          <pre class="textSelectionWrapper" style="top: -{{scrollOffset}}px;">{{{highlightWrapper this}}}</pre>
        {{/each}}
      </div>
    
  </div>

  <div id="editArea">
    {{#if content}}
      <div style="width: 50px; height: 50px; background-color: orange;" class="textHighlighter"></div>
    {{/if}}

    {{#if starImage}}
      <img src="/images/{{starImage}}" style="width: 32px;" class="favoritedStar"/>
    {{/if}}

    {{#if content}}
      <textarea rows="4" cols="50" id="comment">{{comment}}</textarea>
      <button id="saveCommentButton">Save</button>  
    {{/if}}
  </div>
</template>