<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Huddle DemoApp</title>
    <meta charset="utf-8" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <style type="text/css">
        html {
            height: 100%;
        }

        body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        #map-canvas {
            height: 100%;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="style/demo.css">
    <script type="text/javascript" src="js/prototype.js"></script>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBjtVU9d89l5tYFTku6FB5kPyHUoYQ_ClA&sensor=false"></script>
    <script type="text/javascript" src="js/google.map.extensions.js"></script>
    <script type="text/javascript" src="js/jquery-2.1.0.min.js"></script>
    <script type="text/javascript" src="js/jquery.qrcode.min.js"></script>
    <script type="text/javascript" src="js/sketch.js"></script>

    <script type="text/javascript" src="huddle/huddle-common.js"></script>
    <script type="text/javascript" src="huddle/huddle-debug.js"></script>
    <script type="text/javascript" src="huddle/huddle-eventmanager.js"></script>
    <script type="text/javascript" src="huddle/huddle-client.js"></script>

    <script type="text/javascript" src="js/demoapp.controller.js"></script>
    <script type="text/javascript">
        //var map;
        //function initialize() {
        //    var mapOptions = {
        //        zoom: 8,
        //        center: new google.maps.LatLng(-34.397, 150.644)
        //    };
        //    map = new google.maps.Map(document.getElementById('roadmap-map'),
        //        mapOptions);
        //}

        //google.maps.event.addDomListener(window, 'load', initialize);

        $(document).ready(function () {

            // disable touch to avoid moving scroll view
            document.ontouchstart = function (e) {
                e.preventDefault();
            };

            var controller = new DemoAppController("192.168.1.119", 4711, '#map-container');

            var windowWidth = $(window).width();
            var windowHeight = $(window).height();

            $.each(['#f00', '#ff0', '#0f0', '#0ff', '#00f', '#f0f', '#000', '#fff'], function () {
                $('#tools').append("<a href='#note' data-color='" + this + "' style='background: " + this + ";'></a> ");
            });
            $.each([3, 5, 10, 15], function () {
                $('#tools').append("<a href='#note' data-size='" + this + "' style='background: #ccc'>" + this + "</a> ");
            });

            var $notes = $('#note');
            $notes.sketch();
            $notes.get(0).setAttribute('width', windowWidth);
            $notes.get(0).setAttribute('height', windowHeight);

            //MapTypeId.ROADMAP displays the default road map view. This is the default map type.
            //MapTypeId.SATELLITE displays Google Earth satellite images
            //MapTypeId.HYBRID displays a mixture of normal and satellite views
            //MapTypeId.TERRAIN

            $('.toggle-button').on('mouseup', function (event) {
                event.preventDefault();

                var id = this.id;
                //console.log(id);
                switch (id) {
                    case 'map-id-roadmap':
                        controller.changeMapType(google.maps.MapTypeId.ROADMAP);
                        break;
                    case 'map-id-satellite':
                        controller.changeMapType(google.maps.MapTypeId.SATELLITE);
                        break;
                    case 'map-id-hybrid':
                        controller.changeMapType(google.maps.MapTypeId.HYBRID);
                        break;
                    case 'map-id-terrain':
                        controller.changeMapType(google.maps.MapTypeId.TERRAIN);
                        break;
                }
            });

            $('.toggle-button').on('touchstart', function (event) {
                event.preventDefault();

                var id = this.id;
                //console.log(id);
                switch (id) {
                    case 'map-id-roadmap':
                        controller.changeMapType(google.maps.MapTypeId.ROADMAP);
                        break;
                    case 'map-id-satellite':
                        controller.changeMapType(google.maps.MapTypeId.SATELLITE);
                        break;
                    case 'map-id-hybrid':
                        controller.changeMapType(google.maps.MapTypeId.HYBRID);
                        break;
                    case 'map-id-terrain':
                        controller.changeMapType(google.maps.MapTypeId.TERRAIN);
                        break;
                }
            });

            $('#tool-palette').css('transform', 'rotate(270deg)');
        });
    </script>
</head>
<body>
    <div id="map-container" class="huddle-fullscreen"></div>

    <div id="tool-palette-container" class="huddle-fullscreen">
        <div id="tool-palette">
            <table>
                <tr>
                    <td style="font-size: 44px; padding: 10px;" width="10">
                        Roadmap
                        <div id="map-id-roadmap" class="toggle-button">
                            <div id="roadmap-map"></div>
                        </div>
                    </td>
                    <td style="font-size: 44px; padding: 10px;" width="10">
                        Satellite
                        <div id="map-id-satellite" class="toggle-button">
                            <div id="satellite-map"></div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td style="font-size: 44px; padding: 10px;" width="10">
                        Hybrid
                        <div id="map-id-hybrid" class="toggle-button">
                            <div id="hybrid-map"></div>
                        </div>
                    </td>
                    <td style="font-size: 44px; padding: 10px;" width="10">
                        Terrain
                        <div id="map-id-terrain" class="toggle-button">
                            <div id="terrain-map"></div>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <div id="note-container" class="huddle-fullscreen">
        <div id="tools"></div>
        <canvas id="note"></canvas>
    </div>
</body>
</html>
